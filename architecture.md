# Архитектура компьютера

_Романишин Виктор Васильевич_

> Архитектура компьютера изучает **логическую** организацию и структуру аппаратных ресурсов вычеслительной системы. Связана с **программными** аспектами, а не аппаратными.

> Структура - совокупность разного.

Аспекты реализации компьютерной системы не являются частями архитектуры.


## Виртуальный компьютер

## Процессор

> Центральный процессор общается **исключительно** с памятью. 

> С устройствами процессор общается через **окно в оперативной памяти**

> Любая программа должна быть целиком расположена в оперативной памяти.

> Так как двоичный код поддерживает и математические, и логические операции, он стал основой компьютерных систем.

> В компьютерной логике 0 даже не рассматривается. (Изучаются только 1 (истинна)). Все функции, преводящие к 0 сокращаются.

> Математические и логические операции являются бинарными (кроме not).

> BYTE = WORD = разрядность шины процессора. Начиная с 60-x — 8 BIT.

> Современное WORD - DWORD - 16 BIT.

> В момент компиляции программы весь исходный код представляется в виде непрерывного потока команд, где каждая команда имеет свою позицию в памяти, каждая переменная заранее определяется в памяти

Процессор:
- АЛУ (Арифметически-Логическое Устройство) — Исполняет математические и логические операции. `+/-* >< == != not and or xor`.
  - Процессор умеет только складывать.
  - Памяти не имеет, но
  - Обладает собственными регистрами для обработки данных и хранения операндов.
- ОЗУ (Оперативно-Запоминающее Устройство) — 8-Битные ячейки памяти, где каждая ячейка имеет порядковый номер и количество ячеек зависит от разрядности шины адреса.
  - Структура представляет из себя таблицу.
  - Процессор работает не с данными, а с адресами ячеек. (Операции над адресами)
  - Самый медленный 
  - Имеет иерархическую структуру
    - Регистры - Сверхбыстрая память (1 такт)
- Шина адреса — служит указателем на ячейку. В один момент времени может быть открыта только одна ячейка.
- Шина данных — служит дорогой для доставки данных в ячейки. Размер — DWORD. Т.е. работа происходит с двумя ячейками (в одновременном или последовательном режиме).
  - Размер определяет сложность компьютерной системы.
  - Показывает, сколько информации можно передать за один такт.
  - Размерность шины адреса и шины данных может не совпадать.
- Шина управления
- УУ (Устройству Управления) — взаимодействует с шиной управления, обеспечивает **автоматическое** выполнение математических операций.
  - Служит т.н. интерпретатором, расписывающим математические действия на более низкоуровневые операции (с использованием сложения и битовых сдвигов).
- Тактовый генератор - Управляет всеми. Задаёт время на выполнение каждой операции на основе самого слабого звена.


### Д/З

- Определения: процессор, сопроцессор, контроллер, шины (все три)
- Представление и кодирование данных в компьютерной системе

## Компьютерная арифметика

### Представление данных и числе в компьютерной системе

У каждого узла компьютерной системы есть собственные регистры

Объём регистра = WORD (согласно разрядности процессора)

Регистры группируются по 4 бита

Каждый регистр имеет собственное имя, поэтому им не нужны адреса

Двоичный код = двоичное число + знак
- Прямое число (unsigned)
- Прямой код (signed)
- Обратный код = ~прямой код
- Дополнительный код (наиболее распространённый код представления отрицательного числа), ибо всегда имеет дополнительную единицу = Обратный код + 1

#### Представление чисел с запятой

- fixed [sign|int|fract]
- float [знак|порядок|мантиса]

IEEE - всемирная организация стандартизирования всего, что связано с радиоэлектроникой

> IEEE754 - Стандарт представления чисел с плавающей запятой

У двоичного кода есть одно интересное свойство:
- При проведении инверсии числа, оно станет отрицательным
- (2 - 4) = (2 + ~4 + 1)

### Алгебра логики

- Минимальный процессорный комплект — 35 команд
- Стандартный комплект — 50-130 команд
- Универсальный комплект — 900 команд

Базовые логические функции:
- AND - A && B 
- OR
- NOT - Ã = !A
- XOR = (!A && B) || (A && !B)
- Импликация = A => B = [0 -> 1 = 0] = !(!A && B)
- Эквивалентность = NOT XOR
- Мажоритарка = (Sum / Len) > 0.5

Теория $1 Шефера и $2 Пирса: всё можно построить из $1 (NOT и AND) $2 (NOT и OR)

Числа с плавающей запятой должны быть целыми, чтобы с ними можно было выполнять операции. Для этого запятую сдвигают так, чтобы вся информация была в целой части, а размер сдвига указать в мантисе.

Половинная точность

```
| Знак |  Порядок  | Признак запятой |     Мантиса       |
|  F   | E D C B A |                 | 9 8 7 6 5 4 3 2 1 |
```

Single

```
Знак | Порядок  |                       Мантиса                      |
20   | 19 18 17 | 16 15 14 13 12 11 10 F E D C B A 9 8 7 6 5 4 3 2 1 |
```

Double

```
Знак | Порядок  | Мантиса |
40   | 3e - 34  | 51 - 0  |
```

Порядок +, мантиса \*

#### Правило двоичного сложения

- 0 + 0 = 0;
- 0 + 1 = 1;
- 1 + 0 = 1;
- 1 + 1 = 10;

```
  00000001
+ 00000001
  --------
  00000010
```

Полусуматор:

```
def halfsum(a, b):
    return (a ^ b, a & b)
    #        value, carry-out
```

```
def fullsum(a, b, carryout=0):
    v, c = halfsum(a, carryout) # ?
    return halfsum(v, b) # ?
```

Разряд результата = сумма разрядов чисел

## Шутки от Романишина

- Секта свидетелей ЦПУ.
- Если у вас много оперативки — добавьте ещё.
- 90x60x90-нанометровый техпроцесс
